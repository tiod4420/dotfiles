snippet main
	#include <stdio.h>
	#include <stdlib.h>

	int main(int argc, char *argv[])
	{
		int ret = EXIT_FAILURE;
		int res;

		${0:$VISUAL}

		ret = EXIT_SUCCESS;
	cleanup:
		return ret;
	}
snippet func
	int ret = ${1}FAILURE;
	int res;

	${0:$VISUAL}

	ret = ${1}SUCCESS;
	cleanup:
	return ret;
snippet once
	#ifndef ${1:`toupper(vim_snippets#Filename('$1_H', 'UNTITLED_H'))`}
	#define ${1}

	${0:$VISUAL}

	#endif /* end ${1} */
snippet struct
	struct ${1:${VISUAL:struct}} {
	${0}
	};

	void ${1}_init(struct ${1} *${1});
	void ${1}_free(struct ${1} *${1});

	int ${1}_setup(struct ${1} *${1});
snippet cast
	((${1:const uint8_t *})${0:$VISUAL})
snippet todo
	// TODO: ${0:$VISUAL}
snippet pr
	printf("${1:%s}${2:\\n}");
snippet dump
	for (size_t i = 0; i < ${1:${VISUAL:ptr}}_sz; ++i) {
		printf("%02x", ${0:$1}[i]);
	}
	printf("\\n");
snippet array
	uint8_t ${1:array}[$2];
	size_t ${1}_sz = sizeof(${1});
snippet ptr
	uint8_t *${1:ptr} = NULL;
	size_t ${1}_sz = 0;
snippet inc
	#include <${1:stdio}.h>
snippet Inc
	#include "${1:`vim_snippets#Filename("$1.h")`}"
snippet ifdef
	#ifdef ${1:FOO}
	${0:#define}
	#endif /* end ${1} */
snippet ifndef
	#ifndef ${1:FOO}
	${0:#define}
	#endif /* end ${1} */
snippet for
	for (size_t ${2:i} = 0; ${2} < ${1:count}; ${3:++}${2}) {
		${0}
	}
snippet check
	if (${1:0} != res) {
		ret = ${2:1};
		goto cleanup;
	}
snippet nocxx
	#ifdef __cplusplus
	extern "C" {
	#endif

	${0:$VISUAL}

	#ifdef __cplusplus
	} /* end extern "C" */
	#endif
